jenkins:
  securityRealm:
    local:
      allowsSignup: false
      users:
        - id: "{{ jenkins_admin_user }}"
          password: "{{ jenkins_admin_pass }}"
  authorizationStrategy:
    loggedInUsersCanDoAnything:
      allowAnonymousRead: false
  slaveAgentPort: 0
  jobs:
    - script: >
        pipelineJob('multi-echo') {
          definition {
            cps {
              script("""
                pipeline {
                  agent any
                  stages {
                    stage('Echo 1') {
                      steps { echo 'hello from job 1' }
                    }
                    stage('Echo 2') {
                      steps { echo 'hello from job 2' }
                    }
                    stage('Echo 3') {
                      steps { echo 'hello from job 3' }
                    }
                    stage('Echo 4') {
                      steps { echo 'hello from job 4' }
                    }
                    stage('Echo 5') {
                      steps { echo 'hello from job 5' }
                    }
                  }
                }
              """)
              sandbox(true)
            }
          }
        }
